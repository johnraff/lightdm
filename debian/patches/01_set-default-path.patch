Author: Yves-Alexis Perez <corsac@debian.org>
Author: Lionel Le Folgoc <mrpouit@gmail.com>
Bug: https://bugs.launchpad.net/ubuntu/+source/lightdm/+bug/798277
Description: Fix default PATH environment variable
Index: lightdm-1.0.1/src/session.c
===================================================================
--- lightdm-1.0.1.orig/src/session.c	2011-10-04 08:53:53.000000000 +0200
+++ lightdm-1.0.1/src/session.c	2011-10-05 22:15:10.864382047 +0200
@@ -282,7 +282,10 @@
     g_debug ("Launching session");
 
     user = pam_session_get_user (session->priv->authentication);
-    session_set_env (session, "PATH", "/usr/local/bin:/usr/bin:/bin");
+    if (user_get_uid (user) == 0)
+      session_set_env (session, "PATH", "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin");
+    else
+      session_set_env (session, "PATH", "/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games");
     session_set_env (session, "USER", user_get_name (user));
     session_set_env (session, "USERNAME", user_get_name (user)); // FIXME: Is this required?
     session_set_env (session, "HOME", user_get_home_directory (user));
