Author: Yves-Alexis Perez <corsac@debian.org>
Author: Lionel Le Folgoc <mrpouit@gmail.com>
Description: enforce minimum vt configuration
Even if plymouth is running and has an active vt, when minimum-vt is defined
enforce it.
Bug: https://bugs.launchpad.net/lightdm/+bug/801880
diff --git a/src/vt.c b/src/vt.c
index 66f4802..b461bc2 100644
--- a/src/vt.c
+++ b/src/vt.c
@@ -40,6 +40,7 @@ vt_get_active (void)
 #ifdef __linux__
     gint console_fd;
     gint active = -1;
+    gint min = 1;
 
     console_fd = open_console ();
     if (console_fd >= 0)
@@ -52,6 +53,10 @@ vt_get_active (void)
         close (console_fd);
     }
 
+    min = vt_get_min ();
+    if (active < min)
+      active = min;
+
     return active;
 #else
     return -1;
